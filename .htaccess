
# Disable MultiViews: we want the real thing
# http://httpd.apache.org/docs-2.0/mod/mod_negotiation.html#multiviews

Options -MultiViews

<IfModule mod_rewrite.c>
  RewriteEngine on
  
  SetEnvIf Request_URI "/css/" static
  SetEnvIf Request_URI "/img/" static
  SetEnvIf Request_URI "/admin/" static
  SetEnvIf Request_URI "/extlib/" static
  SetEnvIf Request_URI "/test/" static
  SetEnvIf Request_URI "/themes/" static
  SetEnvIf Request_URI "/plugins/" static
  # You can add other lines here to have static content 
  # under a gregarius installation.
  
  #admin section
  RewriteRule   ^admin\/sub\/(.+)$ 	admin/index.php?domain=feeds&add_channel_to_folder=0&action=Add&new_channel=$1 [L]
  RewriteRule 	^admin\/([a-z]+)$	admin/index.php?view=$1 [L]
  
  #opml
  RewriteRule 	^opml.*$		opml.php?act=export [L]

  #tag view
  RewriteRule	^tags?\/?$			tags.php?alltags [L]
  RewriteRule	^tag\/([a-zA-Z0-9_\.\+]+)$  	tags.php?tag=$1 [L]
  RewriteRule	^tag\/([a-zA-Z0-9_\.\+]+)\/rss\/?$  tags.php?tag=$1&rss [L]
  
  #sticky view
  RewriteRule ^sticky?/?$ sticky.php [L]

  #item view
  RewriteCond  %{env:static} ^$
  RewriteRule ^(.+)\/([0-9][0-9][0-9][0-9])\/([0-9][0-9]?)\/?([0-9]?[0-9])?\/?(.*)?$	feed.php?channel=$1&y=$2&m=$3&d=$4&iid=$5 [L]
  
  #feed view
  RewriteCond  %{env:static} ^$
  RewriteRule ^(.+)\/(.*)?$   feed.php?channel=$1&iid=$2 [L]

</IfModule>
